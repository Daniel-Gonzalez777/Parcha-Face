<div class="container mx-auto px-4 py-8" *ngIf="evento">
  <!-- Breadcrumb -->
  <nav class="mb-6">
    <a routerLink="/eventos" class="text-primary hover:underline">Eventos</a>
    <span class="mx-2 text-muted-foreground">></span>
    <span class="text-muted-foreground">{{evento.titulo}}</span>
  </nav>

  <div class="grid lg:grid-cols-3 gap-8">
    <!-- Contenido principal -->
    <div class="lg:col-span-2">
      <div class="mb-6">
        <img [src]="evento.imagen" [alt]="evento.titulo" 
             class="w-full h-64 md:h-80 object-cover rounded-lg mb-6">
        
        <div class="flex items-center gap-2 mb-4">
          <mat-chip-set>
            <mat-chip [style.background-color]="getCategoryColor(evento.categoria)">
              {{evento.categoria}}
            </mat-chip>
          </mat-chip-set>
        </div>
        
        <h1 class="text-3xl font-bold mb-4">{{evento.titulo}}</h1>
        <p class="text-lg text-muted-foreground mb-6">{{evento.descripcion}}</p>
      </div>

      <!-- Detalles del evento -->
      <mat-card class="mb-6">
        <mat-card-header>
          <mat-card-title>Detalles del Evento</mat-card-title>
        </mat-card-header>
        <mat-card-content class="space-y-4">
          <div class="flex items-center gap-3">
            <mat-icon class="text-primary">schedule</mat-icon>
            <div>
              <p class="font-medium">Fecha y Hora</p>
              <p class="text-muted-foreground">{{evento.fecha}} - {{evento.hora}}</p>
            </div>
          </div>
          
          <div class="flex items-center gap-3">
            <mat-icon class="text-primary">location_on</mat-icon>
            <div>
              <p class="font-medium">Ubicación</p>
              <p class="text-muted-foreground">{{evento.ubicacion}}</p>
              <p class="text-sm text-muted-foreground">{{evento.direccion}}</p>
            </div>
          </div>
          
          <div class="flex items-center gap-3">
            <mat-icon class="text-primary">people</mat-icon>
            <div>
              <p class="font-medium">Capacidad</p>
              <p class="text-muted-foreground">{{evento.capacidad}} personas</p>
            </div>
          </div>
          
          <div class="flex items-center gap-3">
            <mat-icon class="text-primary">person</mat-icon>
            <div>
              <p class="font-medium">Organizador</p>
              <p class="text-muted-foreground">{{evento.organizador}}</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Descripción extendida -->
      <mat-card class="mb-6">
        <mat-card-header>
          <mat-card-title>Acerca de este evento</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p class="text-muted-foreground leading-relaxed">
            {{evento.descripcionExtendida}}
          </p>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Sidebar -->
    <div class="lg:col-span-1">
      <mat-card class="sticky top-24">
        <mat-card-content class="p-6">
          <div class="text-center mb-6">
            <div class="text-3xl font-bold text-primary mb-2">{{evento.precio}}</div>
            <p class="text-muted-foreground">por persona</p>
          </div>

          <div class="mb-6">
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm font-medium">Asistentes</span>
              <span class="text-sm text-muted-foreground">{{evento.asistentes}} / {{evento.capacidad}}</span>
            </div>
            <mat-progress-bar mode="determinate" [value]="(evento.asistentes / evento.capacidad) * 100"></mat-progress-bar>
          </div>

          <button mat-raised-button color="primary" class="w-full mb-4" 
                  [disabled]="evento.asistentes >= evento.capacidad">
            {{evento.asistentes >= evento.capacidad ? 'Evento Lleno' : 'Unirse al Evento'}}
          </button>

          <button mat-button class="w-full mb-4">
            <mat-icon>share</mat-icon>
            Compartir
          </button>

          <button mat-button class="w-full">
            <mat-icon>favorite_border</mat-icon>
            Guardar
          </button>
        </mat-card-content>
      </mat-card>

      <!-- Información del organizador -->
      <mat-card class="mt-6">
        <mat-card-header>
          <mat-card-title>Organizador</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="flex items-center gap-3 mb-4">
            <img [src]="evento.organizadorAvatar" [alt]="evento.organizador" 
                 class="w-12 h-12 rounded-full">
            <div>
              <p class="font-medium">{{evento.organizador}}</p>
              <p class="text-sm text-muted-foreground">Organizador verificado</p>
            </div>
          </div>
          <button mat-button color="primary" class="w-full">
            Ver Perfil
          </button>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

<!-- Loading -->
<div *ngIf="!evento" class="container mx-auto px-4 py-8 text-center">
  <mat-spinner></mat-spinner>
  <p class="mt-4 text-muted-foreground">Cargando evento...</p>
</div>
